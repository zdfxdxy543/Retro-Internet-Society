2025-12-26 20:15:55,576 - ShopAITest - ERROR - 测试过程中发生错误: cannot import name 'create_app' from 'app' (E:\Else\VideoGame\GreatGame\onlineworld_backend\app.py)
Traceback (most recent call last):
  File "E:\Else\VideoGame\GreatGame\onlineworld_backend\test_shop_ai_generator.py", line 30, in <module>
    from app import create_app
ImportError: cannot import name 'create_app' from 'app' (E:\Else\VideoGame\GreatGame\onlineworld_backend\app.py)
2025-12-26 20:17:16,776 - ShopAITest - INFO - 开始测试商城自动管理功能...
2025-12-26 20:17:16,776 - ShopAITest - INFO - 1. 初始化ShopAIGenerator...
2025-12-26 20:17:16,776 - ShopAITest - INFO - ShopAIGenerator初始化成功
2025-12-26 20:17:16,776 - ShopAITest - INFO - 2. 测试获取商家名称...
2025-12-26 20:17:16,813 - ShopAITest - INFO - 获取到的商家名称: ['职场新人', '编程菜鸟', '用户7257', '灌水王', '用户8556']
2025-12-26 20:17:16,813 - ShopAITest - INFO - 3. 测试获取商品分类...
2025-12-26 20:17:16,815 - ShopAITest - INFO - 获取到的商品分类: ['电子产品', '服装鞋帽', '家居生活', '美妆个护', '食品生鲜']
2025-12-26 20:17:16,815 - ShopAITest - INFO - 4. 测试生成单个商品数据...
2025-12-26 20:17:17,146 - ShopAITest - INFO - 生成的商品数据: {
  "name": "电子产品二手商品",
  "description": "这是一个由系统自动生成的二手商品，成色良好，功能正常。",
  "price": 354,
  "image_count": 1,
  "tags": [
    "电子产品",
    "二手",
    "自动生成"
  ]
}
2025-12-26 20:17:17,146 - ShopAITest - INFO - 5. 测试批量生成少量商品...
2025-12-26 20:17:17,425 - ShopAITest - INFO - 成功生成 1 个新商品
2025-12-26 20:17:17,426 - ShopAITest - INFO - 6. 测试下架过期商品...
2025-12-26 20:17:17,426 - ShopAITest - INFO - 下架商品结果: module 'datetime' has no attribute 'utcnow'
2025-12-26 20:17:17,426 - ShopAITest - INFO - 7. 测试维护功能...
2025-12-26 20:17:17,426 - ShopAITest - ERROR - 执行维护功能时发生错误: module 'datetime' has no attribute 'utcnow'
2025-12-26 20:17:17,427 - ShopAITest - INFO - 商城自动管理功能测试完成！
2025-12-26 20:18:09,874 - ShopAITest - INFO - 开始测试商城自动管理功能...
2025-12-26 20:18:09,874 - ShopAITest - INFO - 1. 初始化ShopAIGenerator...
2025-12-26 20:18:09,874 - ShopAITest - INFO - ShopAIGenerator初始化成功
2025-12-26 20:18:09,874 - ShopAITest - INFO - 2. 测试获取商家名称...
2025-12-26 20:18:09,875 - ShopAITest - INFO - 获取到的商家名称: ['商家1', '商家2', '商家3', '商家4', '商家5', '商家6', '商家7', '商家8', '商家9', '商家10']
2025-12-26 20:18:09,875 - ShopAITest - INFO - 3. 测试获取商品分类...
2025-12-26 20:18:09,893 - ShopAITest - INFO - 获取到的商品分类: ['电子产品', '服装鞋帽', '家居生活', '美妆个护', '食品生鲜']
2025-12-26 20:18:09,893 - ShopAITest - INFO - 4. 测试生成单个商品数据...
2025-12-26 20:18:09,893 - ShopAITest - INFO - 生成的商品数据: {
  "name": "电子产品二手商品",
  "description": "这是一个由系统自动生成的二手商品，成色良好，功能正常。",
  "price": 385,
  "image_count": 1,
  "tags": [
    "电子产品",
    "二手",
    "自动生成"
  ]
}
2025-12-26 20:18:09,893 - ShopAITest - INFO - 5. 测试批量生成少量商品...
2025-12-26 20:18:09,896 - ShopAITest - ERROR - 生成商品时发生错误: 'created_at' is an invalid keyword argument for ShopMerchant
2025-12-26 20:18:09,896 - ShopAITest - INFO - 6. 测试下架过期商品...
2025-12-26 20:18:09,896 - ShopAITest - INFO - 下架商品结果: 下架商品时出错: type object 'ShopProduct' has no attribute 'created_at'
2025-12-26 20:18:09,897 - ShopAITest - INFO - 7. 测试维护功能...
2025-12-26 20:18:09,898 - ShopAITest - INFO - 维护结果: 生成商品 0 个
2025-12-26 20:18:09,898 - ShopAITest - INFO - 维护结果: 下架商品 0 个
2025-12-26 20:18:09,898 - ShopAITest - INFO - 商城自动管理功能测试完成！
2025-12-26 20:18:58,894 - ShopAITest - INFO - 开始测试商城自动管理功能...
2025-12-26 20:18:58,894 - ShopAITest - INFO - 1. 初始化ShopAIGenerator...
2025-12-26 20:18:58,894 - ShopAITest - INFO - ShopAIGenerator初始化成功
2025-12-26 20:18:58,895 - ShopAITest - INFO - 2. 测试获取商家名称...
2025-12-26 20:18:58,914 - ShopAITest - INFO - 获取到的商家名称: ['京东商城', '天猫旗舰店', '苏宁易购', '用户7016']
2025-12-26 20:18:58,915 - ShopAITest - INFO - 3. 测试获取商品分类...
2025-12-26 20:18:58,917 - ShopAITest - INFO - 获取到的商品分类: ['电子产品', '服装鞋帽', '家居生活', '美妆个护', '食品生鲜']
2025-12-26 20:18:58,917 - ShopAITest - INFO - 4. 测试生成单个商品数据...
2025-12-26 20:18:58,917 - ShopAITest - INFO - 生成的商品数据: {
  "name": "电子产品二手商品",
  "description": "这是一个由系统自动生成的二手商品，成色良好，功能正常。",
  "price": 324,
  "image_count": 1,
  "tags": [
    "电子产品",
    "二手",
    "自动生成"
  ]
}
2025-12-26 20:18:58,917 - ShopAITest - INFO - 5. 测试批量生成少量商品...
2025-12-26 20:18:58,924 - ShopAITest - INFO - 成功生成 1 个新商品
2025-12-26 20:18:58,924 - ShopAITest - INFO - 6. 测试下架过期商品...
2025-12-26 20:18:58,931 - ShopAITest - INFO - 下架商品结果: 成功下架 3 个商品
2025-12-26 20:18:58,931 - ShopAITest - INFO - 7. 测试维护功能...
2025-12-26 20:18:58,940 - ShopAITest - INFO - 维护结果: 生成商品 1 个
2025-12-26 20:18:58,940 - ShopAITest - INFO - 维护结果: 下架商品 3 个
2025-12-26 20:18:58,940 - ShopAITest - INFO - 商城自动管理功能测试完成！
2025-12-26 20:20:56,214 - ShopAITest - INFO - 开始测试商城自动管理功能...
2025-12-26 20:20:56,215 - ShopAITest - INFO - 当前测试模式: 测试模式(不调用真实API)
2025-12-26 20:20:56,215 - ShopAITest - INFO - 1. 初始化ShopAIGenerator...
2025-12-26 20:20:56,215 - ShopAITest - INFO - ShopAIGenerator初始化成功
2025-12-26 20:20:56,215 - ShopAITest - INFO - 2. 测试获取商家名称...
2025-12-26 20:20:56,232 - ShopAITest - INFO - 获取到的商家名称: ['京东商城', '天猫旗舰店', '苏宁易购', '用户7016']
2025-12-26 20:20:56,232 - ShopAITest - INFO - 3. 测试获取商品分类...
2025-12-26 20:20:56,234 - ShopAITest - INFO - 获取到的商品分类: ['电子产品', '服装鞋帽', '家居生活', '美妆个护', '食品生鲜']
2025-12-26 20:20:56,234 - ShopAITest - INFO - 4. 测试生成单个商品数据 (AI大模型核心功能)...
2025-12-26 20:20:56,234 - ShopAITest - INFO - 尝试生成【电子产品】类别商品数据，商家：京东商城
2025-12-26 20:20:56,235 - ShopAITest - INFO - 生成的商品数据: {
  "name": "电子产品二手商品",
  "description": "这是一个由系统自动生成的二手商品，成色良好，功能正常。",
  "price": 627,
  "image_count": 3,
  "tags": [
    "电子产品",
    "二手",
    "自动生成"
  ]
}
2025-12-26 20:20:56,236 - ShopAITest - INFO - 5. 测试批量生成少量商品...
2025-12-26 20:20:56,236 - ShopAITest - INFO - 尝试生成1个新商品...
2025-12-26 20:20:56,243 - ShopAITest - INFO - 成功生成 1 个新商品
2025-12-26 20:20:56,243 - ShopAITest - INFO - 6. 测试下架过期商品...
2025-12-26 20:20:56,243 - ShopAITest - INFO - 尝试下架少量商品...
2025-12-26 20:20:56,248 - ShopAITest - INFO - 下架商品结果: 成功下架 3 个商品
2025-12-26 20:20:56,249 - ShopAITest - INFO - 7. 测试维护功能 (综合测试)...
2025-12-26 20:20:56,249 - ShopAITest - INFO - 执行维护任务：下架过期商品并生成新商品...
2025-12-26 20:20:56,258 - ShopAITest - INFO - 维护结果: 生成商品 1 个
2025-12-26 20:20:56,258 - ShopAITest - INFO - 维护结果: 下架商品 3 个
2025-12-26 20:20:56,259 - ShopAITest - INFO - 
提示: 当前运行在测试模式下，不会调用真实的AI大模型API
2025-12-26 20:20:56,259 - ShopAITest - INFO - 如果需要测试真实API调用功能，请修改脚本中的TEST_MODE变量为False
2025-12-26 20:20:56,259 - ShopAITest - INFO - 并确保已在环境变量或配置文件中设置了有效的SILICON_FLOW_API_KEY
2025-12-26 20:20:56,259 - ShopAITest - INFO - 
商城自动管理功能测试完成！
2025-12-26 20:20:56,259 - ShopAITest - INFO - 
===== 测试总结 =====
2025-12-26 20:20:56,259 - ShopAITest - INFO - 测试模式: 测试模式(不调用真实API)
2025-12-26 20:20:56,259 - ShopAITest - INFO - 测试结果: 成功
2025-12-26 20:20:56,259 - ShopAITest - INFO - ===================
